<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Online Member Application (OMA) - Family Fund</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
   <style>
   .success {
      color: green;
      font-weight: bold;
    }

    .error {
      color: red;
      font-weight: bold;
    }
  </style>
</head>
<body class="bg-light">

  <!-- Header -->
  <%- include('partials/oma-header', { omaUser: omaUser }) %>

  <div class="d-flex">

    <!-- Sidebar for large screens -->
    <div class="d-none d-lg-block">
      <%- include('partials/oma-sidebar', { active: 'auth', omaUser: omaUser, user: user }) %>
    </div>

    <!-- Offcanvas Sidebar for small screens -->
    <div class="d-lg-none">
      <button class="btn btn-primary m-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasSidebar" aria-controls="offcanvasSidebar">
        Menu
      </button>
      <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasSidebar" aria-labelledby="offcanvasSidebarLabel">
        <div class="offcanvas-header">
          <h5 class="offcanvas-title" id="offcanvasSidebarLabel">Menu</h5>
          <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body p-0">
          <%- include('partials/oma-sidebar', { active: 'auth', omaUser: omaUser, user: user }) %>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="flex-grow-1 p-4">
      <div class="card shadow-lg rounded-3 mx-auto" style="max-width: 600px;">
        <div class="card-header bg-primary text-white text-center">
          <h4>Online Member Application (OMA)</h4>
        </div>
        <div class="card-body p-4">

          <!-- Backend feedback -->
      <% if (flash.error?.length) { %>
        <p class="error"><%= flash.error[0] %></p>
      <% } %>
      <% if (flash.success?.length) { %>
        <p class="success"><%= flash.success[0] %></p>
      <% } %>


          <!-- Tabs -->
          <ul class="nav nav-tabs mb-3" id="authTabs" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" id="login-tab" data-bs-toggle="tab" data-bs-target="#loginPane" type="button" role="tab">Login</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="signup-tab" data-bs-toggle="tab" data-bs-target="#signupPane" type="button" role="tab">Signup</button>
            </li>
          </ul>

          <div class="tab-content" id="authTabsContent">
            <!-- Login Form -->
            <div class="tab-pane fade show active" id="loginPane" role="tabpanel">
              <form method="POST" action="/oma/login">
                <div class="mb-3">
                  <label for="loginPhone" class="form-label">Phone</label>
                  <input type="text" class="form-control" id="loginPhone" name="phone" required>
                </div>
                <div class="mb-3">
                  <label for="loginPassword" class="form-label">Password</label>
                  <input type="password" class="form-control" id="loginPassword" name="password" required>
                </div>
                <button type="submit" class="btn btn-primary w-100">Login</button>
              </form>
            </div>

            <!-- Signup Form -->
            <div class="tab-pane fade" id="signupPane" role="tabpanel">
              <form id="signupForm" method="POST" action="/oma/signup">
                <div class="mb-3">
                  <label for="signupFirstName" class="form-label">First Name</label>
                  <input type="text" class="form-control" id="signupFirstName" name="first_name" required>
                </div>
                <div class="mb-3">
                  <label for="signupMiddleName" class="form-label">Middle Name</label>
                  <input type="text" class="form-control" id="signupMiddleName" name="middle_name">
                </div>
                <div class="mb-3">
                  <label for="signupSurName" class="form-label">Surname</label>
                  <input type="text" class="form-control" id="signupSurName" name="sur_name" required>
                </div>
                <div class="mb-3">
                  <label for="signupPhone" class="form-label">Phone</label>
                  <input type="text" class="form-control" id="signupPhone" name="phone" required>
                </div>
                <div class="mb-3">
                  <label for="signupEmail" class="form-label">Email (optional)</label>
                  <input type="email" class="form-control" id="signupEmail" name="email">
                </div>
                <div class="mb-3">
                  <label for="signupPassword" class="form-label">Password</label>
                  <input type="password" class="form-control" id="signupPassword" name="password" required>
                  <div class="strength-meter mt-1">
                    <div class="bar"></div><small class="label"></small>
                  </div>
                </div>
                <div class="mb-3">
                  <label for="signupConfirmPassword" class="form-label">Confirm Password</label>
                  <input type="password" class="form-control" id="signupConfirmPassword" name="confirmPassword" required>
                </div>
                <button type="submit" class="btn btn-success w-100">Signup</button>
              </form>
            </div>
          </div>

        </div>
      </div>
    </div>

  </div>

  <!-- Footer -->
  <%- include('partials/oma-footer') %>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/script/oma-validation.js"></script>
</body>
</html>
