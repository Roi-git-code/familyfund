<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Member Registration</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <link rel="stylesheet" href="/css/app.css" />
</head>
<body>

 <%- include('partials/header') %>

<%- include('partials/sidebar', { user: user }) %>
<div class="container my-4">

  <div class="card p-4">
    <% if (user) { %>
      <p>You are logged in as <strong><%= user.username %></strong> (<%= user.role %>) 
      <a href="/">Go to Home</a> | <a href="/auth/logout">Logout</a></p>
    <% } %>

    <h2>Member Registration Form</h2>

    <!-- Flash Messages -->
    <% if (flash.error?.length) { %>
      <div class="alert alert-danger"><%= flash.error[0] %></div>
    <% } %>
    <% if (flash.success?.length) { %>
      <div class="alert alert-success"><%= flash.success[0] %></div>
    <% } %>

    <!-- Member Registration Form -->
    <form id="memberRegistrationForm" action="/member" method="POST" class="mt-3">
      <div class="mb-3">
        <label for="firstName" class="form-label">First Name</label>
        <input type="text" id="firstName" name="first_name" value="<%= formData.first_name || '' %>" class="form-control" required>
      </div>

      <div class="mb-3">
        <label for="middleName" class="form-label">Middle Name</label>
        <input type="text" id="middleName" name="middle_name" value="<%= formData.middle_name || '' %>" class="form-control">
      </div>

      <div class="mb-3">
        <label for="surName" class="form-label">Sur Name</label>
        <input type="text" id="surName" name="sur_name" value="<%= formData.sur_name || '' %>" class="form-control" required>
      </div>

      <div class="mb-3">
        <label for="dob" class="form-label">Date of Birth</label>
        <input type="date" id="dob" name="date_of_birth" value="<%= formData.date_of_birth || '' %>" class="form-control" required>
      </div>

      <div class="mb-3">
        <label for="email" class="form-label">Email</label>
        <input type="email" id="email" name="email" value="<%= formData.email || '' %>" class="form-control" required>
      </div>

      <div class="mb-3">
        <label for="phone" class="form-label">Phone</label>
        <input type="tel" id="phone" name="phone" value="<%= formData.phone || '' %>" class="form-control" required>
      </div>

      <div class="mb-3">
        <label for="address" class="form-label">Address</label>
        <textarea id="address" name="address" class="form-control" required><%= formData.address || '' %></textarea>
      </div>

      <div class="mb-3">
        <label for="maritalStatus" class="form-label">Marital Status</label>
        <select id="maritalStatus" name="marital_status" class="form-select" required>
          <option value="single" <%= formData.marital_status === 'single' ? 'selected' : '' %>>Single</option>
          <option value="married" <%= formData.marital_status === 'married' ? 'selected' : '' %>>Married</option>
          <option value="divorced" <%= formData.marital_status === 'divorced' ? 'selected' : '' %>>Divorced</option>
        </select>
      </div>

      <div class="mb-3">
        <label for="children" class="form-label">Number of Children</label>
        <input type="number" id="children" name="number_of_children" value="<%= formData.number_of_children || 0 %>" class="form-control" min="0">
      </div>

      <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" id="fatherAlive" name="father_alive" <%= formData.father_alive ? 'checked' : '' %>>
        <label class="form-check-label" for="fatherAlive">Father Alive</label>
      </div>

      <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" id="motherAlive" name="mother_alive" <%= formData.mother_alive ? 'checked' : '' %>>
        <label class="form-check-label" for="motherAlive">Mother Alive</label>
      </div>

      <button type="submit" class="btn btn-primary">Register Member</button>
    </form>
  </div>

  <%- include('partials/change_password_modal') %>
</div>

<%- include('partials/footer') %>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="/script/dashboard.js"></script>
<script src="/script/sidebar.js"></script>
<script src="/script/update_profie.js"></script>
<script src="/script/validation.js"></script>
<script src="/script/layoutScript.js"></script>
</body>
</html>
